!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Imagallery=t():r.Imagallery=t()}(this,function(){return function(r){function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=r,t.c=e,t.i=function(r){return r},t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},t.p="",t(t.s=1)}([function(r,t,e){"use strict";var n=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},i=function(){function r(r,t){var e=[],n=!0,i=!1,a=void 0;try{for(var o,l=r[Symbol.iterator]();!(n=(o=l.next()).done)&&(e.push(o.value),!t||e.length!==t);n=!0);}catch(r){i=!0,a=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(r){return r.reduce(function(r,t){return r+t},0)},o=function(r,t,e){return Math.min(e,Math.max(t,r))},l=function(r,t,e){return r+e*(t-r)},f=function(r){return r.width/r.height},u=function(r){return r.map(f).reduce(function(r,t){return t+r},1)/r.length},h=function(r,t){var e=!0,n=!1,i=void 0;try{for(var a,l=r[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var u=a.value,h=f(u),c=t>1.1?o(h,1,2.75):o(h,.6667,1);u.height=u.width/c}}catch(r){n=!0,i=r}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}},c=function(r,t){return r.width*=t,r.height*=t,r},v=function(r){var t=[],e=!0,n=!1,i=void 0;try{for(var a,o=r[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value,f=JSON.parse(JSON.stringify(l));f._width=l.width,f._height=l.height,t.push(f)}}catch(r){n=!0,i=r}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t},s=function(r){var t=100/a(r.map(f)),e={width:100,height:t};return e.images=r.map(function(r){return g(r,e.height)}),e.ratio=f(e),e},y=function(r){var t=100/a(r.map(function(r){return 1/f(r)})),e={width:t,height:100};return e.images=r.map(function(r){return d(r,e.width)}),e.ratio=f(e),e},d=function(r,t){var e=f(r);if(r.width=t,r.height=t/e,r.images){var n=!0,i=!1,a=void 0;try{for(var o,l=r.images[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value;g(u,r.height)}}catch(r){i=!0,a=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}}return r},g=function(r,t){var e=f(r);if(r.width=t*e,r.height=t,r.images){var n=!0,i=!1,a=void 0;try{for(var o,l=r.images[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value;d(u,r.width)}}catch(r){i=!0,a=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}}return r},p=function(r,t,e){var n=e.averageRatio,a=[];if(t>=1&&a.push([r]),t>=2)for(var o=1;o<=3;o++)a.push([r.slice(0,o),r.slice(o,r.length)]);if(t>=3)for(var l=[].concat(a),f=0;f<l.length;f++){var u=i(l[f],2),h=u[0],c=u[1];if(h&&c)for(var v=n<.85?4:3,s=3;s<=v;s++)a.push([h,c.slice(0,s),c.slice(s,c.length)])}if(t>=4)for(var y=[].concat(a),d=0;d<y.length;d++){var g=i(y[d],3),h=g[0],c=g[1],p=g[2];if(h&&c&&p)for(var w=2;w<=3;w++)a.push([h,c,p.slice(0,w),p.slice(w,p.length)])}if(t>=5)for(var m=[].concat(a),b=0;b<m.length;b++){var x=i(m[b],4),h=x[0],c=x[1],p=x[2],S=x[3];if(h&&c&&p&&S)for(var O=3;O<=4;O++)a.push([h,c,p,S.slice(0,O),S.slice(O,S.length)])}if(t>=6)for(var j=[].concat(a),R=0;R<j.length;R++){var M=i(j[R],5),h=M[0],c=M[1],p=M[2],S=M[3],_=M[4];if(h&&c&&p&&S&&_)for(var I=2;I<=4;I++)a.push([h,c,p,S,_.slice(0,I),_.slice(I,_.length)])}if(t>=7)for(var P=[].concat(a),A=0;A<P.length;A++){var J=i(P[A],6),h=J[0],c=J[1],p=J[2],S=J[3],_=J[4],N=J[5];if(h&&c&&p&&S&&_&&N)for(var k=3;k<=3;k++)a.push([h,c,p,S,_,N.slice(0,k),N.slice(k,N.length)])}return a},w=function(r,t){var e=[],n=r.length<=4,i=function(){return n?2:r.length<=8?3:r.length<=12?4:7}(),a=p(r,i,t),o=!0,l=!1,f=void 0;try{for(var u,h=a[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var c=u.value;1===c.length?e.push({rows:c}):(e.push({rows:c}),n&&1===c[0].length&&e.push({cols:c}))}}catch(r){l=!0,f=r}finally{try{!o&&h.return&&h.return()}finally{if(l)throw f}}return e},m=function(r,t){var e=[];if(r.cols){var i=!0,a=!1,o=void 0;try{for(var l,f=t.images[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var u=l.value,h=!0,c=!1,v=void 0;try{for(var s,y=u.images[Symbol.iterator]();!(h=(s=y.next()).done);h=!0){var g=s.value;e.push(n({},g))}}catch(r){c=!0,v=r}finally{try{!h&&y.return&&y.return()}finally{if(c)throw v}}}}catch(r){a=!0,o=r}finally{try{!i&&f.return&&f.return()}finally{if(a)throw o}}}else if(r.rows){d(n({},t,{images:[t]}),100);var p=!0,w=!1,m=void 0;try{for(var b,x=t.images[Symbol.iterator]();!(p=(b=x.next()).done);p=!0){var S=b.value,O=!0,j=!1,R=void 0;try{for(var M,_=S.images[Symbol.iterator]();!(O=(M=_.next()).done);O=!0){var I=M.value;e.push(n({},I))}}catch(r){j=!0,R=r}finally{try{!O&&_.return&&_.return()}finally{if(j)throw R}}}}catch(r){w=!0,m=r}finally{try{!p&&x.return&&x.return()}finally{if(w)throw m}}}return e},b=function(r,t){var e=w(r,t),n=void 0,i=void 0,a=void 0,o=void 0,u=l(1.25,.47,r.length/25),h=!0,c=!1,v=void 0;try{for(var d,g=e[Symbol.iterator]();!(h=(d=g.next()).done);h=!0){var p=d.value,b=p.cols?s(p.cols.map(y)):y(p.rows.map(s)),x=f(b),S=x,O=m(p,b),j=!0,R=!1,M=void 0;try{for(var _,I=O.filter(function(r){return r.width<=20||r.height<=20})[Symbol.iterator]();!(j=(_=I.next()).done);j=!0){_.value;x>u?x*=1.2:x/=1.2}}catch(r){R=!0,M=r}finally{try{!j&&I.return&&I.return()}finally{if(R)throw M}}p.cols&&(x>u?x/=1.15:x*=1.15),n?Math.abs(x-u)<Math.abs(i-u)&&(i=x,a=S,n=p,o=O):(i=x,a=S,n=p,o=O)}}catch(r){c=!0,v=r}finally{try{!h&&g.return&&g.return()}finally{if(c)throw v}}return{variant:n,previews:o,aspectRatio:a,diff:Math.abs(a-u)}},x=function(r){var t=r[0],e={width:100,height:100},n=Math.min(e.width/t.width,e.height/t.height);return{previews:[c(t,n)],aspectRatio:t.width/t.height,direction:"row"}},S=function(r){var t=[],e=s(r),n=!0,i=!1,a=void 0;try{for(var o,l=e.images[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var f=o.value;t.push(f)}}catch(r){i=!0,a=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return{previews:t,aspectRatio:e.ratio,direction:"row"}},O=function(r,t){var e=void 0,n=b(r,t),i=n.variant,a=n.previews,o=n.diff,l=n.aspectRatio;return i.cols?e="column":i.rows&&(e="row"),{aspectRatio:l,previews:a,direction:e,diff:o}},j=function(r){var t=!0,e=!1,n=void 0;try{for(var i,a=r[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;f(o)>=.56||(o.height=o.width/.56)}}catch(r){e=!0,n=r}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}},R=function(r){var t=!0,e=!1,n=void 0;try{for(var i,a=r[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;f(o)<=1.77||(o.width=1.77*o.height)}}catch(r){e=!0,n=r}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}};r.exports=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"desktop"},e=function(r,t){return{previews:r,aspectRatio:1,direction:"row"}};if(r=v(r),1===r.length)j(r),R(r),e=x;else if(2===r.length)j(r),R(r),e=S;else if(r.length>2&&r.length<=4)j(r),R(r),e=O;else if(r.length>4){var i=u(r);t=n({},t,{averageRatio:i}),h(r,i),e=O}return e(r,t)}},function(r,t,e){r.exports=e(0)}])});