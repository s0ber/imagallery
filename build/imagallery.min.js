!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Imagallery=t():r.Imagallery=t()}(this,function(){return function(r){function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=r,t.c=e,t.i=function(r){return r},t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},t.p="",t(t.s=1)}([function(r,t,e){"use strict";var n=function(){function r(r,t){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!t||e.length!==t);n=!0);}catch(r){i=!0,a=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i={width:100,height:66.66},a=i.width/i.height,o=function(r){return r.width/r.height},u=function(r){var t=Math.min(100/r.width,100/r.height);return l(r,t)},l=function r(t,e){t.width,t.height;if(t.width=t.width*e,t.height=t.height*e,t.images){var n=!0,i=!1,a=void 0;try{for(var o,u=t.images[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){r(o.value,e)}}catch(r){i=!0,a=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}}return t},h=function(r){var t=[],e=!0,n=!1,i=void 0;try{for(var a,o=r[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value,l=JSON.parse(JSON.stringify(u));l._width=u.width,l._height=u.height,t.push(l)}}catch(r){n=!0,i=r}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t},f=function(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=100/r.map(function(r){return o(r)}).reduce(function(r,t){return r+t},0),n={width:100,height:e};return n.images=r.map(function(r){var t=o(r);return r.width=n.height*t,r.height=n.height,r.images&&s(r.images,r.width),r}),n.ratio=o(n),t&&(n=v(n)),n},c=function(r){var t=100/r.map(function(r){return 1/o(r)}).reduce(function(r,t){return r+t},0),e={width:t,height:100};return e.images=r.map(function(r){var t=o(r);return r.width=e.width,r.height=e.width/t,r.images&&d(r.images,r.height),r}),e.ratio=o(e),e},v=function(r){var t=1/(r.images.length+1);if(r.ratio<a){var e=0,n=0,i=0,u=!0,l=!1,h=void 0;try{for(var c,v=r.images[Symbol.iterator]();!(u=(c=v.next()).done);u=!0){var s=c.value;o(s)<t?(s._imbalanced=!0,e++):(i+=s.width,n++)}}catch(r){l=!0,h=r}finally{try{!u&&v.return&&v.return()}finally{if(l)throw h}}var d=!0,g=!1,m=void 0;try{for(var w,p=r.images[Symbol.iterator]();!(d=(w=p.next()).done);d=!0){var b=w.value;b._imbalanced&&(b.width=i*t/(1-t*e),b.height=r.height,delete b._imbalanced,y(b))}}catch(r){g=!0,m=r}finally{try{!d&&p.return&&p.return()}finally{if(g)throw m}}return f(r.images)}return r},y=function(r){r.images&&s(r.images,r.width)},s=function(r,t){var e=!0,n=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var l=a.value,h=o(l);l.width=t,l.height=t/h}}catch(r){n=!0,i=r}finally{try{!e&&u.return&&u.return()}finally{if(n)throw i}}},d=function(r,t){var e=!0,n=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var l=a.value,h=o(l);l.width=t*h,l.height=t}}catch(r){n=!0,i=r}finally{try{!e&&u.return&&u.return()}finally{if(n)throw i}}},g=function(r,t){if(t.ratio<a)r.width=t.height*o(r),r.height=100/a;else if(t.ratio>3.5){t.ratio;r.width=t.height*o(r),r.height=100/3.5}return r},m=function(r,t){var e=[];if(t>=1&&e.push([r]),t>=2)for(var i=0;i<r.length;i++)0!==i&&e.push([r.slice(0,i),r.slice(i,r.length)]);if(3===t){var a=!0,o=!1,u=void 0;try{for(var l,h=e[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var f=n(l.value,2),c=f[0],v=f[1];if(c&&v)for(var y=c.length>1?c:v,s=0;s<c.length;s++)if(0!==s){var d=[y.slice(0,s),y.slice(s,c.length)];c.length>1?d.push(v):d.unshift(c),e.push(d)}}}catch(r){o=!0,u=r}finally{try{!a&&h.return&&h.return()}finally{if(o)throw u}}}return e},w=function(r){var t=[],e=3===r.length||4===r.length,n=m(r,e?2:3),i=!0,a=!1,o=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var h=u.value;1===h.length?t.push({singleRow:h[0]}):(t.push({rows:h}),e&&1===h[0].length&&t.push({cols:h}))}}catch(r){a=!0,o=r}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return t},p=function(r){var t=w(r),e=void 0,n=void 0,i=!0,a=!1,u=void 0;try{for(var l,h=t[Symbol.iterator]();!(i=(l=h.next()).done);i=!0){var v=l.value,y=void 0;if(v.singleRow)y=f(v.singleRow);else if(v.rows){var s=v.rows.map(function(r){return f(r)});y=c(s)}else if(v.cols){var d=v.cols.map(function(r){return c(r)});y=f(d)}var g=o(y);e?Math.abs(g-1.5)<Math.abs(n-1.5)&&(n=g,e=v):(n=g,e=v)}}catch(r){a=!0,u=r}finally{try{!i&&h.return&&h.return()}finally{if(a)throw u}}return e},b=function(r){var t=r[0];return[u(t)]},x=function(r){var t=[],e=f(r,!0),n=!0,i=!1,a=void 0;try{for(var o,u=e.images[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value,h=g(l,e);t.push(h)}}catch(r){i=!0,a=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return t},S=function(r){var t=[],e=p(r);if(e.singleRow){var n=f(e.singleRow,!0),i=!0,a=!1,o=void 0;try{for(var u,h=n.images[Symbol.iterator]();!(i=(u=h.next()).done);i=!0){var v=u.value;t.push(g(v,n))}}catch(r){a=!0,o=r}finally{try{!i&&h.return&&h.return()}finally{if(a)throw o}}}else if(e.cols){var y=e.cols.map(function(r){return c(r)}),s=f(y),d=!0,m=!1,w=void 0;try{for(var b,x=s.images[Symbol.iterator]();!(d=(b=x.next()).done);d=!0){var S=b.value,_=!0,j=!1,O=void 0;try{for(var R,M=S.images[Symbol.iterator]();!(_=(R=M.next()).done);_=!0){var I=R.value;t.push(I)}}catch(r){j=!0,O=r}finally{try{!_&&M.return&&M.return()}finally{if(j)throw O}}}}catch(r){m=!0,w=r}finally{try{!d&&x.return&&x.return()}finally{if(m)throw w}}}else if(e.rows){var A=e.rows.map(function(r){return f(r)}),J=c(A),N=100/J.width,P=!0,E=!1,T=void 0;try{for(var k,q=J.images[Symbol.iterator]();!(P=(k=q.next()).done);P=!0){var z=k.value,B=!0,C=!1,D=void 0;try{for(var F,G=z.images[Symbol.iterator]();!(B=(F=G.next()).done);B=!0){var H=F.value;t.push(l(H,N))}}catch(r){C=!0,D=r}finally{try{!B&&G.return&&G.return()}finally{if(C)throw D}}}}catch(r){E=!0,T=r}finally{try{!P&&q.return&&q.return()}finally{if(E)throw T}}}return t};r.exports=function(r){return r=h(r),1===r.length?b(r):2===r.length?x(r):r.length>2?S(r):void 0}},function(r,t,e){r.exports=e(0)}])});