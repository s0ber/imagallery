!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Imagallery=t():r.Imagallery=t()}(this,function(){return function(r){function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=r,t.c=e,t.i=function(r){return r},t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},t.p="",t(t.s=1)}([function(r,t,e){"use strict";var n=function(){function r(r,t){var e=[],n=!0,i=!1,o=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(e.push(a.value),!t||e.length!==t);n=!0);}catch(r){i=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(r){return r.width/r.height},o=function r(t,e){t.width,t.height;if(t.width*=e,t.height*=e,t.images){var n=!0,i=!1,o=void 0;try{for(var a,u=t.images[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){r(a.value,e)}}catch(r){i=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}}return t},a=function(r){var t=[],e=!0,n=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var u=o.value,l=JSON.parse(JSON.stringify(u));l._width=u.width,l._height=u.height,t.push(l)}}catch(r){n=!0,i=r}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}return t},u=function(r){var t=100/r.map(function(r){return i(r)}).reduce(function(r,t){return r+t},0),e={width:100,height:t};return e.images=r.map(function(r){var t=i(r);return r.width=e.height*t,r.height=e.height,r.images&&f(r.images,r.width),r}),e.ratio=i(e),e},l=function(r){var t=100/r.map(function(r){return 1/i(r)}).reduce(function(r,t){return r+t},0),e={width:t,height:100};return e.images=r.map(function(r){var t=i(r);return r.width=e.width,r.height=e.width/t,r.images&&h(r.images,r.height),r}),e.ratio=i(e),e},f=function(r,t){var e=!0,n=!1,o=void 0;try{for(var a,u=r[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var l=a.value,f=i(l);l.width=t,l.height=t/f}}catch(r){n=!0,o=r}finally{try{!e&&u.return&&u.return()}finally{if(n)throw o}}},h=function(r,t){var e=!0,n=!1,o=void 0;try{for(var a,u=r[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var l=a.value,f=i(l);l.width=t*f,l.height=t}}catch(r){n=!0,o=r}finally{try{!e&&u.return&&u.return()}finally{if(n)throw o}}},c=function(r,t){var e=[];if(t>=1&&e.push([r]),t>=2)for(var i=0;i<r.length;i++)0!==i&&e.push([r.slice(0,i),r.slice(i,r.length)]);if(3===t){var o=!0,a=!1,u=void 0;try{for(var l,f=e[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var h=n(l.value,2),c=h[0],v=h[1];if(c&&v)for(var y=c.length>1?c:v,s=0;s<c.length;s++)if(0!==s){var d=[y.slice(0,s),y.slice(s,c.length)];c.length>1?d.push(v):d.unshift(c),e.push(d)}}}catch(r){a=!0,u=r}finally{try{!o&&f.return&&f.return()}finally{if(a)throw u}}}return e},v=function(r){var t=[],e=3===r.length||4===r.length,n=c(r,e?2:3),i=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value;1===f.length?t.push({singleRow:f[0]}):(t.push({rows:f}),e&&1===f[0].length&&t.push({cols:f}))}}catch(r){o=!0,a=r}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return t},y=function(r,t){var e=v(r),n=void 0,o=void 0,a="desktop"==t.type?1.5:.66,f=!0,h=!1,c=void 0;try{for(var y,s=e[Symbol.iterator]();!(f=(y=s.next()).done);f=!0){var d=y.value,g=void 0;if(d.singleRow)g=u(d.singleRow);else if(d.rows){var p=d.rows.map(function(r){return u(r)});g=l(p)}else if(d.cols){var w=d.cols.map(function(r){return l(r)});g=u(w)}var m=i(g);n?Math.abs(m-a)<Math.abs(o-a)&&(o=m,n=d):(o=m,n=d)}}catch(r){h=!0,c=r}finally{try{!f&&s.return&&s.return()}finally{if(h)throw c}}return n},s=function(r,t){var e=r[0],n="desktop"==t.type?1:.666,i={width:100,height:100/n},a=Math.min(i.width/e.width,i.height/e.height);return[o(e,a)]},d=function(r,t){var e=[],n=u(r),i=!0,o=!1,a=void 0;try{for(var l,f=n.images[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var h=l.value;e.push(h)}}catch(r){o=!0,a=r}finally{try{!i&&f.return&&f.return()}finally{if(o)throw a}}return e},g=function(r,t){var e=[],n=y(r,t);if(n.singleRow){var i=u(n.singleRow),a=!0,f=!1,h=void 0;try{for(var c,v=i.images[Symbol.iterator]();!(a=(c=v.next()).done);a=!0){var s=c.value;e.push(s)}}catch(r){f=!0,h=r}finally{try{!a&&v.return&&v.return()}finally{if(f)throw h}}}else if(n.cols){var d=n.cols.map(function(r){return l(r)}),g=u(d),p=!0,w=!1,m=void 0;try{for(var b,x=g.images[Symbol.iterator]();!(p=(b=x.next()).done);p=!0){var S=b.value,j=!0,O=!1,R=void 0;try{for(var I,M=S.images[Symbol.iterator]();!(j=(I=M.next()).done);j=!0){var _=I.value;e.push(_)}}catch(r){O=!0,R=r}finally{try{!j&&M.return&&M.return()}finally{if(O)throw R}}}}catch(r){w=!0,m=r}finally{try{!p&&x.return&&x.return()}finally{if(w)throw m}}}else if(n.rows){var k=n.rows.map(function(r){return u(r)}),A=l(k),J=100/A.width,N=!0,P=!1,E=void 0;try{for(var T,q=A.images[Symbol.iterator]();!(N=(T=q.next()).done);N=!0){var z=T.value,B=!0,C=!1,D=void 0;try{for(var F,G=z.images[Symbol.iterator]();!(B=(F=G.next()).done);B=!0){var H=F.value;e.push(o(H,J))}}catch(r){C=!0,D=r}finally{try{!B&&G.return&&G.return()}finally{if(C)throw D}}}}catch(r){P=!0,E=r}finally{try{!N&&q.return&&q.return()}finally{if(P)throw E}}}return e},p=function(r){var t=!0,e=!1,n=void 0;try{for(var o,a=r[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;i(u)>=.7||(u.height=u.width/.7)}}catch(r){e=!0,n=r}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}};r.exports=window.Imagallery=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"desktop"},e=void 0;return r=a(r),p(r),1===r.length?e=s:2===r.length?e=d:r.length>2&&(e=g),e(r,t)}},function(r,t,e){r.exports=e(0)}])});