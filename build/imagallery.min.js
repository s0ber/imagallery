!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Imagallery=t():r.Imagallery=t()}(this,function(){return function(r){function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=r,t.c=e,t.i=function(r){return r},t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},t.p="",t(t.s=1)}([function(r,t,e){"use strict";var n=function(){function r(r,t){var e=[],n=!0,i=!1,a=void 0;try{for(var o,l=r[Symbol.iterator]();!(n=(o=l.next()).done)&&(e.push(o.value),!t||e.length!==t);n=!0);}catch(r){i=!0,a=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i={width:100,height:66.66},a=i.width/i.height,o=function(r){return r.width/r.height},l=function(r){var t=Math.min(i.width/r.width,i.height/r.height);return u(r,t)},u=function r(t,e){t.width,t.height;if(t.width=t.width*e,t.height=t.height*e,t.images){var n=!0,i=!1,a=void 0;try{for(var o,l=t.images[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){r(o.value,e)}}catch(r){i=!0,a=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}}return t},h=function(r){var t=!0,e=!1,n=void 0;try{for(var i,a=r[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o._width=o.width,o._height=o.height}}catch(r){e=!0,n=r}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}},f=function(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=100/r.map(function(r){return o(r)}).reduce(function(r,t){return r+t},0),n={width:100,height:e};return n.images=r.map(function(r){var t=o(r);return r.width=n.height*t,r.height=n.height,r.images&&d(r.images,r.width),r}),n.ratio=o(n),t&&(n=v(n)),n},c=function(r){var t=100/r.map(function(r){return 1/o(r)}).reduce(function(r,t){return r+t},0),e={width:t,height:100};return e.images=r.map(function(r){var t=o(r);return r.width=e.width,r.height=e.width/t,r.images&&s(r.images,r.height),r}),e.ratio=o(e),e},v=function(r){var t=1/(r.images.length+1);if(r.ratio<a){var e=0,n=0,i=0,l=!0,u=!1,h=void 0;try{for(var c,v=r.images[Symbol.iterator]();!(l=(c=v.next()).done);l=!0){var d=c.value;o(d)<t?(d._imbalanced=!0,e++):(i+=d.width,n++)}}catch(r){u=!0,h=r}finally{try{!l&&v.return&&v.return()}finally{if(u)throw h}}var s=!0,g=!1,m=void 0;try{for(var w,p=r.images[Symbol.iterator]();!(s=(w=p.next()).done);s=!0){var b=w.value;b._imbalanced&&(b.width=i*t/(1-t*e),b.height=r.height,delete b._imbalanced,y(b))}}catch(r){g=!0,m=r}finally{try{!s&&p.return&&p.return()}finally{if(g)throw m}}return f(r.images)}return r},y=function(r){r.images&&d(r.images,r.width)},d=function(r,t){var e=!0,n=!1,i=void 0;try{for(var a,l=r[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var u=a.value,h=o(u);u.width=t,u.height=t/h}}catch(r){n=!0,i=r}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}},s=function(r,t){var e=!0,n=!1,i=void 0;try{for(var a,l=r[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var u=a.value,h=o(u);u.width=t*h,u.height=t}}catch(r){n=!0,i=r}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}},g=function(r,t){if(t.ratio<a)return{width:t.height*o(r),height:100/a};if(t.ratio>3.5){t.ratio;return{width:t.height*o(r),height:100/3.5}}return r},m=function(r,t){var e=[];if(t>=1&&e.push([r]),t>=2)for(var i=0;i<r.length;i++)0!==i&&e.push([r.slice(0,i),r.slice(i,r.length)]);if(3===t){var a=!0,o=!1,l=void 0;try{for(var u,h=e[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var f=n(u.value,2),c=f[0],v=f[1];if(c&&v)for(var y=c.length>1?c:v,d=0;d<c.length;d++)if(0!==d){var s=[y.slice(0,d),y.slice(d,c.length)];c.length>1?s.push(v):s.unshift(c),e.push(s)}}}catch(r){o=!0,l=r}finally{try{!a&&h.return&&h.return()}finally{if(o)throw l}}}return e},w=function(r){var t=[],e=3===r.length||4===r.length,n=m(r,e?2:3),i=!0,a=!1,o=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var h=l.value;1===h.length?t.push({singleRow:h[0]}):(t.push({rows:h}),e&&1===h[0].length&&t.push({cols:h}))}}catch(r){a=!0,o=r}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return t},p=function(r){var t=w(r),e=void 0,n=void 0,i=!0,a=!1,l=void 0;try{for(var u,h=t[Symbol.iterator]();!(i=(u=h.next()).done);i=!0){var v=u.value,y=void 0;if(v.singleRow)y=f(v.singleRow);else if(v.rows){var d=v.rows.map(function(r){return f(r)});y=c(d)}else if(v.cols){var s=v.cols.map(function(r){return c(r)});y=f(s)}var g=o(y);e?Math.abs(g-1.5)<Math.abs(n-1.5)&&(n=g,e=v):(n=g,e=v)}}catch(r){a=!0,l=r}finally{try{!i&&h.return&&h.return()}finally{if(a)throw l}}return e},b=function(r,t){var e=t.width,n=t.height;return{color:r.color,width:e,height:n}};r.exports=function(r){h(r);var t=[];if(1===r.length){var e=r[0],n=l(e);t.push(n)}else if(2===r.length){var i=f(r,!0),a=!0,o=!1,v=void 0;try{for(var y,d=i.images[Symbol.iterator]();!(a=(y=d.next()).done);a=!0){var s=y.value,m=g(s,i);m.color=s.color;var w=b(s,m);t.push(w)}}catch(r){o=!0,v=r}finally{try{!a&&d.return&&d.return()}finally{if(o)throw v}}}else if(r.length>2){var x=p(r);if(x.singleRow){var S=f(x.singleRow,!0),_=!0,j=!1,R=void 0;try{for(var M,O=S.images[Symbol.iterator]();!(_=(M=O.next()).done);_=!0){var I=M.value,A=g(I,S),P=b(I,A);t.push(P)}}catch(r){j=!0,R=r}finally{try{!_&&O.return&&O.return()}finally{if(j)throw R}}}else if(x.cols){var E=x.cols.map(function(r){return c(r)}),T=f(E),k=!0,q=!1,z=void 0;try{for(var B,C=T.images[Symbol.iterator]();!(k=(B=C.next()).done);k=!0){var D=B.value,F=!0,G=!1,H=void 0;try{for(var J,K=D.images[Symbol.iterator]();!(F=(J=K.next()).done);F=!0){var L=J.value,N=b(L,L);t.push(N)}}catch(r){G=!0,H=r}finally{try{!F&&K.return&&K.return()}finally{if(G)throw H}}}}catch(r){q=!0,z=r}finally{try{!k&&C.return&&C.return()}finally{if(q)throw z}}}else if(x.rows){var Q=x.rows.map(function(r){return f(r)}),U=c(Q),V=100/U.width,W=!0,X=!1,Y=void 0;try{for(var Z,$=U.images[Symbol.iterator]();!(W=(Z=$.next()).done);W=!0){var rr=Z.value,tr=!0,er=!1,nr=void 0;try{for(var ir,ar=rr.images[Symbol.iterator]();!(tr=(ir=ar.next()).done);tr=!0){var or=ir.value,lr=b(or,u(or,V));t.push(lr)}}catch(r){er=!0,nr=r}finally{try{!tr&&ar.return&&ar.return()}finally{if(er)throw nr}}}}catch(r){X=!0,Y=r}finally{try{!W&&$.return&&$.return()}finally{if(X)throw Y}}}}return t}},function(r,t,e){r.exports=e(0)}])});