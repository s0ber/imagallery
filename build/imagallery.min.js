!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Imagallery=t():r.Imagallery=t()}(this,function(){return function(r){function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=r,t.c=e,t.i=function(r){return r},t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},t.p="",t(t.s=1)}([function(r,t,e){"use strict";var n=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},i=function(){function r(r,t){var e=[],n=!0,i=!1,o=void 0;try{for(var a,l=r[Symbol.iterator]();!(n=(a=l.next()).done)&&(e.push(a.value),!t||e.length!==t);n=!0);}catch(r){i=!0,o=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(r){return r.reduce(function(r,t){return r+t},0)},a=function(r,t,e){return Math.min(e,Math.max(t,r))},l=function(r,t,e){return r+e*(t-r)},f=function(r){return r.width/r.height},u=function(r){return r.map(f).reduce(function(r,t){return t+r},1)/r.length},h=function(r,t){var e=!0,n=!1,i=void 0;try{for(var o,l=r[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var u=o.value,h=f(u),c=t>1.1?a(h,1,2.75):a(h,.6667,1);u.height=u.width/c}}catch(r){n=!0,i=r}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}},c=function(r,t){return r.width*=t,r.height*=t,r},v=function(r){var t=[],e=!0,n=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value,f=JSON.parse(JSON.stringify(l));f._width=l.width,f._height=l.height,t.push(f)}}catch(r){n=!0,i=r}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}return t},s=function(r){var t=100/o(r.map(f)),e={width:100,height:t};return e.images=r.map(function(r){return g(r,e.height)}),e.ratio=f(e),e},y=function(r){var t=100/o(r.map(function(r){return 1/f(r)})),e={width:t,height:100};return e.images=r.map(function(r){return d(r,e.width)}),e.ratio=f(e),e},d=function(r,t){var e=f(r);if(r.width=t,r.height=t/e,r.images){var n=!0,i=!1,o=void 0;try{for(var a,l=r.images[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;g(u,r.height)}}catch(r){i=!0,o=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}return r},g=function(r,t){var e=f(r);if(r.width=t*e,r.height=t,r.images){var n=!0,i=!1,o=void 0;try{for(var a,l=r.images[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;d(u,r.width)}}catch(r){i=!0,o=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}return r},p=function(r,t,e){var n=e.averageRatio,o=[];if(t>=1&&o.push([r]),t>=2)for(var a=1;a<4;a++)o.push([r.slice(0,a),r.slice(a,r.length)]);if(t>=3)for(var l=[].concat(o),f=0;f<l.length;f++){var u=i(l[f],2),h=u[0],c=u[1];if(h&&c)for(var v=n<.85?4:3,s=1;s<v+1;s++)o.push([h,c.slice(0,s),c.slice(s,c.length)])}if(t>=4)for(var y=[].concat(o),d=0;d<y.length;d++){var g=i(y[d],3),h=g[0],c=g[1],p=g[2];if(h&&c&&p)for(var w=1;w<4;w++)o.push([h,c,p.slice(0,w),p.slice(w,p.length)])}if(t>=5)for(var m=[].concat(o),b=0;b<m.length;b++){var x=i(m[b],4),h=x[0],c=x[1],p=x[2],S=x[3];if(h&&c&&p&&S)for(var R=1;R<5;R++)o.push([h,c,p,S.slice(0,R),S.slice(R,S.length)])}if(t>=6)for(var O=[].concat(o),j=0;j<O.length;j++){var M=i(O[j],5),h=M[0],c=M[1],p=M[2],S=M[3],_=M[4];if(h&&c&&p&&S&&_)for(var I=1;I<5;I++)o.push([h,c,p,S,_.slice(0,I),_.slice(I,_.length)])}if(t>=7)for(var P=[].concat(o),A=0;A<P.length;A++){var J=i(P[A],6),h=J[0],c=J[1],p=J[2],S=J[3],_=J[4],N=J[5];if(h&&c&&p&&S&&_&&N)for(var k=1;k<3;k++)o.push([h,c,p,S,_,N.slice(0,k),N.slice(k,N.length)])}return o},w=function(r,t){var e=[],n=r.length<=4,i=function(){return n?2:r.length<=8?3:r.length<=12?4:r.length<=16?5:r.length<=18?6:7}(),o=p(r,i,t),a=!0,l=!1,f=void 0;try{for(var u,h=o[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var c=u.value;1===c.length?e.push({singleRow:c[0]}):(e.push({rows:c}),n&&1===c[0].length&&e.push({cols:c}))}}catch(r){l=!0,f=r}finally{try{!a&&h.return&&h.return()}finally{if(l)throw f}}return e},m=function(r,t){var e=[];if(r.cols){var i=!0,o=!1,a=void 0;try{for(var l,f=t.images[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var u=l.value,h=!0,c=!1,v=void 0;try{for(var s,y=u.images[Symbol.iterator]();!(h=(s=y.next()).done);h=!0){var g=s.value;e.push(n({},g))}}catch(r){c=!0,v=r}finally{try{!h&&y.return&&y.return()}finally{if(c)throw v}}}}catch(r){o=!0,a=r}finally{try{!i&&f.return&&f.return()}finally{if(o)throw a}}}else if(r.rows){d(n({},t,{images:[t]}),100);var p=!0,w=!1,m=void 0;try{for(var b,x=t.images[Symbol.iterator]();!(p=(b=x.next()).done);p=!0){var S=b.value,R=!0,O=!1,j=void 0;try{for(var M,_=S.images[Symbol.iterator]();!(R=(M=_.next()).done);R=!0){var I=M.value;e.push(n({},I))}}catch(r){O=!0,j=r}finally{try{!R&&_.return&&_.return()}finally{if(O)throw j}}}}catch(r){w=!0,m=r}finally{try{!p&&x.return&&x.return()}finally{if(w)throw m}}}return e},b=function(r,t){var e=w(r,t),n=void 0,i=void 0,o=void 0,a=l(1.5,.47,r.length/25),u=!0,h=!1,c=void 0;try{for(var v,d=e[Symbol.iterator]();!(u=(v=d.next()).done);u=!0){var g=v.value,p=g.singleRow?s(g.singleRow):g.cols?s(g.cols.map(y)):y(g.rows.map(s)),b=f(p),x=m(g,p),S=!0,R=!1,O=void 0;try{for(var j,M=x.filter(function(r){return r.width<=20||r.height<=20})[Symbol.iterator]();!(S=(j=M.next()).done);S=!0){j.value;b>a?b*=1.3:b/=1.3}}catch(r){R=!0,O=r}finally{try{!S&&M.return&&M.return()}finally{if(R)throw O}}n?Math.abs(b-a)<Math.abs(i-a)&&(i=b,n=g,o=x):(i=b,n=g,o=x)}}catch(r){h=!0,c=r}finally{try{!u&&d.return&&d.return()}finally{if(h)throw c}}return{variant:n,previews:o,aspectRatio:i,diff:Math.abs(i-a)}},x=function(r){var t=r[0],e={width:100,height:100},n=Math.min(e.width/t.width,e.height/t.height);return{previews:[c(t,n)],aspectRatio:t.width/t.height,direction:"row"}},S=function(r){var t=[],e=s(r),n=!0,i=!1,o=void 0;try{for(var a,l=e.images[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var f=a.value;t.push(f)}}catch(r){i=!0,o=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return{previews:t,aspectRatio:e.ratio,direction:"row"}},R=function(r,t){var e=void 0,n=b(r,t),i=n.variant,o=n.previews,a=n.diff,l=n.aspectRatio;return i.singleRow?e="row":i.cols?e="column":i.rows&&(e="row"),{aspectRatio:l,previews:o,direction:e,diff:a}},O=function(r){var t=!0,e=!1,n=void 0;try{for(var i,o=r[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;f(a)>=.56||(a.height=a.width/.56)}}catch(r){e=!0,n=r}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}},j=function(r){var t=!0,e=!1,n=void 0;try{for(var i,o=r[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;f(a)<=1.77||(a.width=1.77*a.height)}}catch(r){e=!0,n=r}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}};r.exports=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"desktop"},e=function(r,t){return r};if(r=v(r),1===r.length)O(r),j(r),e=x;else if(2===r.length)O(r),j(r),e=S;else if(r.length>2&&r.length<=4)O(r),j(r),e=R;else if(r.length>4){var i=u(r);t=n({},t,{averageRatio:i}),h(r,i),e=R}return e(r,t)}},function(r,t,e){r.exports=e(0)}])});